from model import (User,
                   GroupUser,
                   GroupPendingUser,
                   Group,
                   GroupAdmin,
                   Goal,
                   Workout,
                   Like,
                   Personal_Goal,
                   db,
                   connect_to_db)

import datetime

import plotly.graph_objs as go

from flask import (Flask,
                   request,
                   )



# get_user_profile_data(user_id=1, session_user_id=1, is_admin=True):
get_user_profile_matching_session_id_is_admin_result = {'workout_count': 8, 'user_photo': u'http://fellowship.hackbrightacademy.com/media/CACHE/images/students/IMG_0005/6259c4fbf765821b3b73f6a0964592f9.jpg', 'group_ids': [1, 2], 'user_id': 1, 'is_my_profile': True, 'personal_goal': 7, 'four_week_by_hour_fig': {'layout': {'title': 'Workouts by Hour <br> <i>4 and 5 star performances by day</i>', 'yaxis': {'ticks': 'outside', 'showgrid': False, 'title': '# of Workouts'}, 'height': 600, 'width': 1200, 'yaxis2': {'tickfont': {'color': 'rgb(148, 103, 189)'}, 'title': '% of Top Workouts', 'ticks': 'outside', 'overlaying': 'y', 'showgrid': False, 'range': [0, 110], 'titlefont': {'color': 'rgb(148, 103, 189)'}, 'side': 'right'}, 'barmode': 'grouped', 'legend': {'font': {}, 'orientation': 'h'}}, 'data': [{'name': 'Four Weeks- Top', 'y': (0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0), 'hoverinfo': 'none', 'marker': {'color': '#3AC9FF'}, 'x': ['12AM', '1AM', '2AM', '3AM', '4AM', '5AM', '6AM', '7AM', '8AM', '9AM', '10AM', '11AM', '12PM', '1PM', '2PM', '3PM', '4PM', '5PM', '6PM', '7PM', '8PM', '9PM', '10PM', '11PM'], 'type': 'bar'}, {'name': 'Four Weeks- All', 'y': (0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0), 'hoverinfo': 'none', 'marker': {'color': '#B3E9FE'}, 'x': ['12AM', '1AM', '2AM', '3AM', '4AM', '5AM', '6AM', '7AM', '8AM', '9AM', '10AM', '11AM', '12PM', '1PM', '2PM', '3PM', '4PM', '5PM', '6PM', '7PM', '8PM', '9PM', '10PM', '11PM'], 'type': 'bar'}, {'name': 'Percentage of Top Performances', 'yaxis': 'y2', 'connectgaps': True, 'y': [0, 0, 0, 0, 0, 0, 0.0, 0.0, 100.0, 100.0, 0.0, 0.0, 0.0, 100.0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], 'x': ['12AM', '1AM', '2AM', '3AM', '4AM', '5AM', '6AM', '7AM', '8AM', '9AM', '10AM', '11AM', '12PM', '1PM', '2PM', '3PM', '4PM', '5PM', '6PM', '7PM', '8PM', '9PM', '10PM', '11PM'], 'line': {'shape': 'spline'}, 'type': 'scatter'}]}, 'first_name': u'User1', 'personal_valuemax': 114.28571428571428, 'eight_week_by_hour_fig': {'layout': {'title': 'Workouts by Hour <br> <i>4 and 5 star performances by day</i>', 'yaxis': {'ticks': 'outside', 'showgrid': False, 'title': '# of Workouts'}, 'height': 600, 'width': 1200, 'yaxis2': {'tickfont': {'color': 'rgb(148, 103, 189)'}, 'title': '% of Top Workouts', 'ticks': 'outside', 'overlaying': 'y', 'showgrid': False, 'range': [0, 110], 'titlefont': {'color': 'rgb(148, 103, 189)'}, 'side': 'right'}, 'barmode': 'grouped', 'legend': {'font': {}, 'orientation': 'h'}}, 'data': [{'name': 'Eight Weeks- Top', 'y': (0, 0, 0, 0, 0, 0, 0, 0, 3, 3, 0, 0, 0, 3, 4, 0, 0, 0, 4, 3, 0, 0, 0, 0), 'hoverinfo': 'none', 'marker': {'color': '#3AC9FF'}, 'x': ['12AM', '1AM', '2AM', '3AM', '4AM', '5AM', '6AM', '7AM', '8AM', '9AM', '10AM', '11AM', '12PM', '1PM', '2PM', '3PM', '4PM', '5PM', '6PM', '7PM', '8PM', '9PM', '10PM', '11PM'], 'type': 'bar'}, {'name': 'Eight Weeks- All', 'y': (0, 0, 0, 0, 0, 3, 3, 3, 3, 3, 3, 3, 3, 3, 4, 4, 4, 4, 4, 3, 0, 0, 0, 0), 'hoverinfo': 'none', 'marker': {'color': '#B3E9FE'}, 'x': ['12AM', '1AM', '2AM', '3AM', '4AM', '5AM', '6AM', '7AM', '8AM', '9AM', '10AM', '11AM', '12PM', '1PM', '2PM', '3PM', '4PM', '5PM', '6PM', '7PM', '8PM', '9PM', '10PM', '11PM'], 'type': 'bar'}, {'name': 'Percentage of Top Performances', 'yaxis': 'y2', 'connectgaps': True, 'y': [0, 0, 0, 0, 0, 0.0, 0.0, 0.0, 100.0, 100.0, 0.0, 0.0, 0.0, 100.0, 100.0, 0.0, 0.0, 0.0, 100.0, 100.0, 0, 0, 0, 0], 'x': ['12AM', '1AM', '2AM', '3AM', '4AM', '5AM', '6AM', '7AM', '8AM', '9AM', '10AM', '11AM', '12PM', '1PM', '2PM', '3PM', '4PM', '5PM', '6PM', '7PM', '8PM', '9PM', '10PM', '11PM'], 'line': {'shape': 'spline'}, 'type': 'scatter'}]}, 'workouts_for_board': [(u'run', datetime.datetime(2017, 3, 1, 7, 0), 2, 2.0, u'miles', None), (u'run', datetime.datetime(2017, 3, 2, 8, 0), 3, 3.0, u'miles', None), (u'run', datetime.datetime(2017, 3, 3, 9, 0), 4, 4.0, u'miles', None), (u'run', datetime.datetime(2017, 3, 4, 10, 0), 5, 5.0, u'miles', None), (u'run', datetime.datetime(2017, 3, 5, 11, 0), 1, 6.0, u'miles', None), (u'run', datetime.datetime(2017, 3, 6, 12, 0), 2, 7.0, u'miles', None), (u'run', datetime.datetime(2017, 3, 7, 13, 0), 3, 8.0, u'miles', None), (u'run', datetime.datetime(2017, 3, 8, 14, 0), 4, 9.0, u'miles', None)], 'four_week_by_day_fig': {'layout': {'title': 'Workouts by Day <br> <i>4 and 5 star performances by day</i>', 'yaxis': {'ticks': 'outside', 'showgrid': False, 'title': '# of Workouts'}, 'height': 600, 'width': 1200, 'yaxis2': {'tickfont': {'color': 'rgb(148, 103, 189)'}, 'title': '% of Top Workouts', 'ticks': 'outside', 'overlaying': 'y', 'showgrid': False, 'range': [0, 110], 'titlefont': {'color': 'rgb(148, 103, 189)'}, 'side': 'right'}, 'barmode': 'grouped', 'legend': {'font': {}, 'orientation': 'h'}}, 'data': [{'name': 'Four Weeks- Top Performances', 'y': (0, 0, 1, 0, 1, 1, 0), 'hoverinfo': 'none', 'marker': {'color': '#3AC9FF'}, 'x': ['Mon', 'Tues', 'Wed', 'Thurs', 'Fri', 'Sat', 'Sun'], 'type': 'bar'}, {'name': 'Four Weeks- All Workouts', 'y': (1, 1, 2, 1, 1, 1, 1), 'hoverinfo': 'none', 'marker': {'color': '#B3E9FE'}, 'x': ['Mon', 'Tues', 'Wed', 'Thurs', 'Fri', 'Sat', 'Sun'], 'type': 'bar'}, {'name': 'Percentage of Top Performances', 'yaxis': 'y2', 'connectgaps': True, 'y': [0.0, 0.0, 50.0, 0.0, 100.0, 100.0, 0.0], 'x': ['Mon', 'Tues', 'Wed', 'Thurs', 'Fri', 'Sat', 'Sun'], 'line': {'shape': 'spline'}, 'type': 'scatter'}]}, 'personal_progress_formatted': '114%', 'full_group_info': [[1, u'Group1', 4, 200.0, '200%'], [2, u'Group2', 4, 200.0, '200%']], 'personal_progress': 114.28571428571428, 'pending_approval': 0, 'eight_week_by_day_fig': {'layout': {'title': 'Workouts by Day <br> <i>4 and 5 star performances by day</i>', 'yaxis': {'ticks': 'outside', 'showgrid': False, 'title': '# of Workouts'}, 'height': 600, 'width': 1200, 'yaxis2': {'tickfont': {'color': 'rgb(148, 103, 189)'}, 'title': '% of Top Workouts', 'ticks': 'outside', 'overlaying': 'y', 'showgrid': False, 'range': [0, 110], 'titlefont': {'color': 'rgb(148, 103, 189)'}, 'side': 'right'}, 'barmode': 'grouped', 'legend': {'font': {}, 'orientation': 'h'}}, 'data': [{'name': 'Eight Weeks- Top Performances', 'y': (4, 2, 3, 2, 3, 5, 1), 'hoverinfo': 'none', 'marker': {'color': '#3AC9FF'}, 'x': ['Mon', 'Tues', 'Wed', 'Thurs', 'Fri', 'Sat', 'Sun'], 'type': 'bar'}, {'name': 'Eight Weeks- All Workouts', 'y': (8, 7, 8, 7, 7, 7, 6), 'hoverinfo': 'none', 'marker': {'color': '#B3E9FE'}, 'x': ['Mon', 'Tues', 'Wed', 'Thurs', 'Fri', 'Sat', 'Sun'], 'type': 'bar'}, {'name': 'Percentage of Top Performances', 'yaxis': 'y2', 'connectgaps': True, 'y': [50.0, 29.0, 38.0, 29.0, 43.0, 71.0, 17.0], 'x': ['Mon', 'Tues', 'Wed', 'Thurs', 'Fri', 'Sat', 'Sun'], 'line': {'shape': 'spline'}, 'type': 'scatter'}]}}


# get_user_profile_data(user_id=1, mismatching_session_user_id=2, is_admin=True)
get_user_profile_mismatching_session_id_is_admin_result = {'workout_count': 8, 'user_photo': u'http://fellowship.hackbrightacademy.com/media/CACHE/images/students/IMG_0005/6259c4fbf765821b3b73f6a0964592f9.jpg', 'group_ids': [1, 2], 'user_id': 1, 'is_my_profile': False, 'personal_goal': 7, 'four_week_by_hour_fig': {'layout': {'title': 'Workouts by Hour <br> <i>4 and 5 star performances by day</i>', 'yaxis': {'ticks': 'outside', 'showgrid': False, 'title': '# of Workouts'}, 'height': 600, 'width': 1200, 'yaxis2': {'tickfont': {'color': 'rgb(148, 103, 189)'}, 'title': '% of Top Workouts', 'ticks': 'outside', 'overlaying': 'y', 'showgrid': False, 'range': [0, 110], 'titlefont': {'color': 'rgb(148, 103, 189)'}, 'side': 'right'}, 'barmode': 'grouped', 'legend': {'font': {}, 'orientation': 'h'}}, 'data': [{'name': 'Four Weeks- Top', 'y': (0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0), 'hoverinfo': 'none', 'marker': {'color': '#3AC9FF'}, 'x': ['12AM', '1AM', '2AM', '3AM', '4AM', '5AM', '6AM', '7AM', '8AM', '9AM', '10AM', '11AM', '12PM', '1PM', '2PM', '3PM', '4PM', '5PM', '6PM', '7PM', '8PM', '9PM', '10PM', '11PM'], 'type': 'bar'}, {'name': 'Four Weeks- All', 'y': (0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0), 'hoverinfo': 'none', 'marker': {'color': '#B3E9FE'}, 'x': ['12AM', '1AM', '2AM', '3AM', '4AM', '5AM', '6AM', '7AM', '8AM', '9AM', '10AM', '11AM', '12PM', '1PM', '2PM', '3PM', '4PM', '5PM', '6PM', '7PM', '8PM', '9PM', '10PM', '11PM'], 'type': 'bar'}, {'name': 'Percentage of Top Performances', 'yaxis': 'y2', 'connectgaps': True, 'y': [0, 0, 0, 0, 0, 0, 0.0, 0.0, 100.0, 100.0, 0.0, 0.0, 0.0, 100.0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], 'x': ['12AM', '1AM', '2AM', '3AM', '4AM', '5AM', '6AM', '7AM', '8AM', '9AM', '10AM', '11AM', '12PM', '1PM', '2PM', '3PM', '4PM', '5PM', '6PM', '7PM', '8PM', '9PM', '10PM', '11PM'], 'line': {'shape': 'spline'}, 'type': 'scatter'}]}, 'first_name': u'User1', 'personal_valuemax': 114.28571428571428, 'eight_week_by_hour_fig': {'layout': {'title': 'Workouts by Hour <br> <i>4 and 5 star performances by day</i>', 'yaxis': {'ticks': 'outside', 'showgrid': False, 'title': '# of Workouts'}, 'height': 600, 'width': 1200, 'yaxis2': {'tickfont': {'color': 'rgb(148, 103, 189)'}, 'title': '% of Top Workouts', 'ticks': 'outside', 'overlaying': 'y', 'showgrid': False, 'range': [0, 110], 'titlefont': {'color': 'rgb(148, 103, 189)'}, 'side': 'right'}, 'barmode': 'grouped', 'legend': {'font': {}, 'orientation': 'h'}}, 'data': [{'name': 'Eight Weeks- Top', 'y': (0, 0, 0, 0, 0, 0, 0, 0, 3, 3, 0, 0, 0, 3, 4, 0, 0, 0, 4, 3, 0, 0, 0, 0), 'hoverinfo': 'none', 'marker': {'color': '#3AC9FF'}, 'x': ['12AM', '1AM', '2AM', '3AM', '4AM', '5AM', '6AM', '7AM', '8AM', '9AM', '10AM', '11AM', '12PM', '1PM', '2PM', '3PM', '4PM', '5PM', '6PM', '7PM', '8PM', '9PM', '10PM', '11PM'], 'type': 'bar'}, {'name': 'Eight Weeks- All', 'y': (0, 0, 0, 0, 0, 3, 3, 3, 3, 3, 3, 3, 3, 3, 4, 4, 4, 4, 4, 3, 0, 0, 0, 0), 'hoverinfo': 'none', 'marker': {'color': '#B3E9FE'}, 'x': ['12AM', '1AM', '2AM', '3AM', '4AM', '5AM', '6AM', '7AM', '8AM', '9AM', '10AM', '11AM', '12PM', '1PM', '2PM', '3PM', '4PM', '5PM', '6PM', '7PM', '8PM', '9PM', '10PM', '11PM'], 'type': 'bar'}, {'name': 'Percentage of Top Performances', 'yaxis': 'y2', 'connectgaps': True, 'y': [0, 0, 0, 0, 0, 0.0, 0.0, 0.0, 100.0, 100.0, 0.0, 0.0, 0.0, 100.0, 100.0, 0.0, 0.0, 0.0, 100.0, 100.0, 0, 0, 0, 0], 'x': ['12AM', '1AM', '2AM', '3AM', '4AM', '5AM', '6AM', '7AM', '8AM', '9AM', '10AM', '11AM', '12PM', '1PM', '2PM', '3PM', '4PM', '5PM', '6PM', '7PM', '8PM', '9PM', '10PM', '11PM'], 'line': {'shape': 'spline'}, 'type': 'scatter'}]}, 'workouts_for_board': [(u'run', datetime.datetime(2017, 3, 1, 7, 0), 2, 2.0, u'miles', None), (u'run', datetime.datetime(2017, 3, 2, 8, 0), 3, 3.0, u'miles', None), (u'run', datetime.datetime(2017, 3, 3, 9, 0), 4, 4.0, u'miles', None), (u'run', datetime.datetime(2017, 3, 4, 10, 0), 5, 5.0, u'miles', None), (u'run', datetime.datetime(2017, 3, 5, 11, 0), 1, 6.0, u'miles', None), (u'run', datetime.datetime(2017, 3, 6, 12, 0), 2, 7.0, u'miles', None), (u'run', datetime.datetime(2017, 3, 7, 13, 0), 3, 8.0, u'miles', None), (u'run', datetime.datetime(2017, 3, 8, 14, 0), 4, 9.0, u'miles', None)], 'four_week_by_day_fig': {'layout': {'title': 'Workouts by Day <br> <i>4 and 5 star performances by day</i>', 'yaxis': {'ticks': 'outside', 'showgrid': False, 'title': '# of Workouts'}, 'height': 600, 'width': 1200, 'yaxis2': {'tickfont': {'color': 'rgb(148, 103, 189)'}, 'title': '% of Top Workouts', 'ticks': 'outside', 'overlaying': 'y', 'showgrid': False, 'range': [0, 110], 'titlefont': {'color': 'rgb(148, 103, 189)'}, 'side': 'right'}, 'barmode': 'grouped', 'legend': {'font': {}, 'orientation': 'h'}}, 'data': [{'name': 'Four Weeks- Top Performances', 'y': (0, 0, 1, 0, 1, 1, 0), 'hoverinfo': 'none', 'marker': {'color': '#3AC9FF'}, 'x': ['Mon', 'Tues', 'Wed', 'Thurs', 'Fri', 'Sat', 'Sun'], 'type': 'bar'}, {'name': 'Four Weeks- All Workouts', 'y': (1, 1, 2, 1, 1, 1, 1), 'hoverinfo': 'none', 'marker': {'color': '#B3E9FE'}, 'x': ['Mon', 'Tues', 'Wed', 'Thurs', 'Fri', 'Sat', 'Sun'], 'type': 'bar'}, {'name': 'Percentage of Top Performances', 'yaxis': 'y2', 'connectgaps': True, 'y': [0.0, 0.0, 50.0, 0.0, 100.0, 100.0, 0.0], 'x': ['Mon', 'Tues', 'Wed', 'Thurs', 'Fri', 'Sat', 'Sun'], 'line': {'shape': 'spline'}, 'type': 'scatter'}]}, 'personal_progress_formatted': '114%', 'full_group_info': [[1, u'Group1', 4, 200.0, '200%'], [2, u'Group2', 4, 200.0, '200%']], 'personal_progress': 114.28571428571428, 'pending_approval': 0, 'eight_week_by_day_fig': {'layout': {'title': 'Workouts by Day <br> <i>4 and 5 star performances by day</i>', 'yaxis': {'ticks': 'outside', 'showgrid': False, 'title': '# of Workouts'}, 'height': 600, 'width': 1200, 'yaxis2': {'tickfont': {'color': 'rgb(148, 103, 189)'}, 'title': '% of Top Workouts', 'ticks': 'outside', 'overlaying': 'y', 'showgrid': False, 'range': [0, 110], 'titlefont': {'color': 'rgb(148, 103, 189)'}, 'side': 'right'}, 'barmode': 'grouped', 'legend': {'font': {}, 'orientation': 'h'}}, 'data': [{'name': 'Eight Weeks- Top Performances', 'y': (4, 2, 3, 2, 3, 5, 1), 'hoverinfo': 'none', 'marker': {'color': '#3AC9FF'}, 'x': ['Mon', 'Tues', 'Wed', 'Thurs', 'Fri', 'Sat', 'Sun'], 'type': 'bar'}, {'name': 'Eight Weeks- All Workouts', 'y': (8, 7, 8, 7, 7, 7, 6), 'hoverinfo': 'none', 'marker': {'color': '#B3E9FE'}, 'x': ['Mon', 'Tues', 'Wed', 'Thurs', 'Fri', 'Sat', 'Sun'], 'type': 'bar'}, {'name': 'Percentage of Top Performances', 'yaxis': 'y2', 'connectgaps': True, 'y': [50.0, 29.0, 38.0, 29.0, 43.0, 71.0, 17.0], 'x': ['Mon', 'Tues', 'Wed', 'Thurs', 'Fri', 'Sat', 'Sun'], 'line': {'shape': 'spline'}, 'type': 'scatter'}]}}


# get_users_top_workouts(user_ids=[1, 2, 3])

get_users_top_workouts_results = [(u'run', datetime.datetime(2017, 3, 3, 9, 0), 4, 4.0, u'miles', None, u'User1 Lname1'), (u'run', datetime.datetime(2017, 3, 4, 10, 0), 5, 5.0, u'miles', None, u'User1 Lname1'), (u'run', datetime.datetime(2017, 3, 8, 14, 0), 4, 9.0, u'miles', None, u'User1 Lname1'), (u'run', datetime.datetime(2017, 3, 3, 9, 0), 4, 4.0, u'miles', None, u'User2 Lname2'), (u'run', datetime.datetime(2017, 3, 4, 10, 0), 5, 5.0, u'miles', None, u'User2 Lname2'), (u'run', datetime.datetime(2017, 3, 8, 14, 0), 4, 9.0, u'miles', None, u'User2 Lname2'), (u'run', datetime.datetime(2017, 3, 3, 9, 0), 4, 4.0, u'miles', None, u'User3 Lname3'), (u'run', datetime.datetime(2017, 3, 4, 10, 0), 5, 5.0, u'miles', None, u'User3 Lname3'), (u'run', datetime.datetime(2017, 3, 8, 14, 0), 4, 9.0, u'miles', None, u'User3 Lname3')]


# get_weeks_workouts(user_id=1):
get_weeks_workouts_results = "[<Workout workout_id=871 user_id=1 workout_time=2017-03-01 07:00:00 exercise_type=run>, <Workout workout_id=872 user_id=1 workout_time=2017-03-02 08:00:00 exercise_type=run>, <Workout workout_id=873 user_id=1 workout_time=2017-03-03 09:00:00 exercise_type=run>, <Workout workout_id=874 user_id=1 workout_time=2017-03-04 10:00:00 exercise_type=run>, <Workout workout_id=875 user_id=1 workout_time=2017-03-05 11:00:00 exercise_type=run>, <Workout workout_id=876 user_id=1 workout_time=2017-03-06 12:00:00 exercise_type=run>, <Workout workout_id=877 user_id=1 workout_time=2017-03-07 13:00:00 exercise_type=run>, <Workout workout_id=878 user_id=1 workout_time=2017-03-08 14:00:00 exercise_type=run>]"
